* [v] Минимальная функциональность
    * [v] Собирается
    * [v] Запускается отладка
* [v] Способ встраивания сторонних C-либ
    * [v] Heatshrink
        * [v] Сборка с остальной системой
        * [v] Создать внешнюю либу, которая использует C под капотом
        * [v] Собрать с либой, протестировать
* [v] Начальная конфигурация клоков MCU
    * [v] Найти правильную реализацию HAL
        tm32l4xx-hal, features = ["stm32l4x3", "rt"]
    * [v] Разобраться как взаимодействовать с API
        use stm32l4xx_hal::stm32;

* [v] "Перешагивать" код, где нет отладочных символов
    gdb: skip -rfu ^core::

* [v] USB
    * [v] Настрить минимальную сборку
    * [v] Разобраться с получением stm32::Peripherals::take()
        unsafe {stm32::Peripherals::steal()}
    * [v] Клокинг USB от PLLR (/2)
    * [v] Виртуальный COM-порт работает

* [x] Частота проца в конфиге FreeRTOS
    \- Переехали на RTIC \-

* [v] Разобраться с cargo embed
    Смотри полную справку в обсидиане
    [v] Config: `.embed.toml`
    [v] Прошивка
    [v] Логирование: `rtt-target`
    [v] Отладка

* [_] USB Mass Storage
    https://github.com/cs2dsb/stm32-usb.rs/tree/master/firmware/usbd_mass_storage
    * [_] Выбрать VID/PID
    * [v] Пример запускается, но пока с заглушкой вместо чтения-записи
    * [v] Удалось создать Mass Storage + ACM, но работает нестабильно
        * [v] Под FreeRTOS бе части работают, но в винде только COM-порт ито как-то странно
        * [_] Заставить работать в винде
    * [v] Пример c Mass Storage жрет почти все мето в контроллере, почему?
        добавил оптимизацию 1 уровня - размер уменьшился в 2 раза `[profile.dev]/opt-level = 1`
    * [x] Проверить распознает ли винда диск Mass Storage
        Не работает, вероятно проблема в "string descriptor 0 read error: -71"
    * [x] RTIC Запуск задачи вне контекста прерывания
        Все задачи RTIC - это прерывания

* [v] defmt : https://ferrous-systems.com/blog/defmt/
    Множественные изменение в настройках сборки

* [v] Определить, оставляем RTIC или FreeRTOS 
    Выбрана FreeRTOS

* [_] Привезти проект в порядок
    * [v] Убрать варнинги от названий FreeRTOS
    * [v] Вынести сервисный код в модули
    * [v] Привезти в порядок хуки `defmt::panic!()`
    * [_] Настроить зависимость от heatshrink-rust как подкаталог
    * [v] Проверить конфиг FreeRTOS
        * [v] configCPU_CLOCK_HZ <= from config
        * [v] configUSE_MALLOC_FAILED_HOOK = 1
        * [v] configUSE_TICKLESS_IDLE = 1 -> configUSE_LOBARO_TICKLESS_IDLE = 1
        * [x] configPRIO_BITS - ?
    * [_] Прерывания USB будит поток-обработчик

* [_] Определение режима работы в зависимости от того, включен ли USB
    * [v] Определение, включен-ли USB
        * [v] Мониторинг через pwr.sr2.PVMO1, делитель R2-R10 больше не нужен
        * [v] Если не включен - не запускать драйвер
    * [_] Различная настройка клоков для разных режимов
        Медленный режим - 12MHz (HSE => CPU) 
        Быстрый: (HSE = 12 / 3 * 40 / 2 => 80 => CPU), (HSE= 12 / 3 * 24 / 2 => PLLSAI1Q => USB)
        * [_] Вместо rcc.cfgr.freeze использовать свою реализацию, посколькоу оно не даёт 
            возможности напрямую подать с HSE в CPU
    * [v] FreeRTOS будет настроен на медленный режим (12MHz), в быстром тики будут идти чаще.
    * [v] Трейт для режимов работы
        Поскольку полиморфизм очень странно себя ведет, то виртуальные функции юзать лучше не
        надо, генерики и компайл-тайм полиморфизм!